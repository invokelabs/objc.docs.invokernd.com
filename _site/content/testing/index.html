<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">

<title>
  
    Testing via Appium, SauceLabs and the Testing Framework of your choice &middot; Bootstrap
  
</title>

<!-- Bootstrap core CSS -->
<link href="/assets/css/bootstrap.min.css" rel="stylesheet">

<!-- Documentation extras -->
<link href="/assets/css/syntax.css" rel="stylesheet">
<link href="/assets/css/docs.css" rel="stylesheet">
<link href="/assets/css/pygments-manni.css" rel="stylesheet">

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="/assets/js/html5shiv.js"></script>
  <script src="/assets/js/respond.min.js"></script>
<![endif]-->

<!-- Favicons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
                <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">
                               <link rel="shortcut icon" href="/assets/ico/favicon.png">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44789370-1', 'invokernd.com');
  ga('send', 'pageview');

</script>

    <!-- Place anything custom after this. -->
    <style>
    .footer-links ul {
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .footer-links .links-left {
      padding-left: 40%;
    }

    .footer-links .links-right {
      padding-right: 40%;
    }

    </style>
  </head>
  <body>
    <a class="sr-only" href="#content">Skip navigation</a>

    <!-- Docs master nav -->
    <header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <a href="#menu">
        <button class="navbar-toggle" type="button" data-toggle="collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
      </a>      
      <a href="/" class="navbar-brand">Invoke Labs</a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li id="invert-color-nav" class="dropdown ">
          <a href="/content/style_guide" class="dropdown-toggle" data-toggle="dropdown">Style Guide</a>
            <ul class="dropdown-menu">
              <li><a href="/content/style_guide">Overview</a></li>
              <li><a href="/content/style_guide#dot-notation-syntax">Dot-Notation Syntax</a></li>
              <li><a href="/content/style_guide#spacing">Spacing</a></li>
              <li><a href="/content/style_guide#conditionals">Conditionals</a></li>
              <li><a href="/content/style_guide#error-handling">Error handling</a></li>
              <li><a href="/content/style_guide#methods">Methods</a></li>
              <li><a href="/content/style_guide#variables">Variables</a></li>
              <li><a href="/content/style_guide#naming">Naming</a></li>
              <li><a href="/content/style_guide#image-naming">Image Naming</a></li>
              <li><a href="/content/style_guide#booleans">Booleans</a></li>
              <li><a href="/content/style_guide#singletons">Singletons</a></li>
            </ul>
        </li>

        <li id="invert-color-nav" class="dropdown ">
          <a href="/content/coding_practices" class="dropdown-toggle" data-toggle="dropdown">Coding Practices</a>
            <ul class="dropdown-menu">
              <li><a href="/content/coding_practices">Overview</a></li>              
              <li><a href="/content/coding_practices#init-and-dealloc">init and dealloc</a></li>
              <li><a href="/content/coding_practices#class-layout">Class Layout</a></li>
              <li><a href="/content/coding_practices#literals">Literals</a></li>
              <li><a href="/content/coding_practices#cgrect-functions">CGRect Functions</a></li>
              <li><a href="/content/coding_practices#constants">Constants</a></li>
              <li><a href="/content/coding_practices#enumerated-types">Enumerated Types</a></li>
              <li><a href="/content/coding_practices#private-properties">Private Properties</a></li>
              <li><a href="/content/coding_practices#blocks">Blocks</a></li>
            </ul>
        </li>

        <li id="invert-color-nav" >
          <a href="/content/documentation">Documentation</a>
        </li>

        <li id="invert-color-nav" >
          <a href="/content/xcode">Xcode</a>
        </li>
        <li id="invert-color-nav" >
          <a href="/content/testing">Testing</a>
        </li>
      </ul>
    </nav>
  </div>
</header>


    <!-- Docs page layout -->
    <div class="bs-header" id="content">
      <div class="container">
        <h1>Testing via Appium, SauceLabs and the Testing Framework of your choice</h1>
      </div>
    </div>
    <br/>
    <div class="container center bs-docs-container">
      <div class="row">
<!--         <div class="col-md-3">
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul class="nav bs-sidenav">
              &nbsp;
              
            </ul>
          </div>
        </div> -->
        <div class="body-content col-md-12" role="main">
          
<h2 id="step_0_a_brief_overview">Step 0: A brief overview</h2>

<h3 id="what_is_appium">What is Appium?</h3>

<p>Appium, at its heart, is a way to avoid having to learn some testing specific language beyond what you already use to code. The whole premise is built on the notion that you can write your Automation Tests in the same language as you develop in and not have to waste time learning/using Xcode Instruments directly, which is actually a pretty solid idea. As I understand it, Appium is written on the back of the Selenium JSON wire protocol, so if you have any familiarity with that, this should be pretty easy… or at least similar.</p>

<h3 id="what_is_saucelabs">What is SauceLabs?</h3>

<p>SauceLabs provides a service that allows users to carry out their testing in the cloud while still using their actual app and their own test code without any need for translation. In a nutshell, you upload a build of your app to their site and then point your tests to their servers at the location where your build is stored. They run the test on dedicated machines and keep track of all sorts of stats and stuff for you.</p>

<h3 id="what_is_the_testing_frame_work_of_your_choice">What is the testing frame work of your choice?</h3>

<p>Pretty wide open as long as you can properly integrate with the Appium/Selenium API protocols. Some popular choices seem to be:</p>

<ol>
<li>
<p><strong>Cucumber</strong>: a BDD based set up that uses Gherkin to generate scenario files, which you then use ruby to write tests for, which you then code in your Xcode project. Seems like a tool that is useful beyond just the scope of post-facto automation testing as the focus seems to be on test design prior to coding, and then coding based on your tests. I think true usage of cucumber would involve a pretty big shakedown of the development cycle as you wouldn’t really write a line of code until you had your Gherkin feature file pretty well hashed out. I gather that you supplement/expand your feature file as you continue on with development but the main thrust is written off the design spec docs prior to coding. I’m not entirely familiar with the roles in terms of who would ultimately be responsible for creating the actual UITest files to accompany the feature files (If this is a QA thing, or a Dev thing) but that would require some thought as well I guess, as there is a lot of work to be done if a thorough test suite is what you are looking for.<br />*** notes: ***<br />a. Only works with Ruby, Java, .Net out of the box… you can use with other languages like Obj-C but that involves 4th party libraries like <a href="https://github.com/OCCukes/OCCukes">this one</a> which might be stretching things a little far. So in a way, who ever was writing the tests would need to be writing in Ruby.</p>
</li>

<li>
<p><strong>PHPUnit</strong>: I think this what the QA department is currently using for web automation testing so it makes sense to only have one testing langauge (thats the whole point of appium after all). With that in mind, they can write scripts for moblie (both android and ios) in exactlly the same fashion that they write the scripts for web testing and use all the same commands, sauce communications, etc for everything. Of course, they could also implement all previous PHPUnit web tests in Cucumber with Ruby, but considering nothing has really been done on the mobile side yet, probably makes sense to go with the other.</p>
</li>

<li>
<p><strong>etc</strong>: this list could go on about J-Unit and other testing frameworks but not too much will be gained that isnt covered by the previous two. I think the testing framework choice is really just based on what the QAs/Devs are comfortable with.</p>
</li>
</ol>

<h2 id="step_1_creating_a_build_to_test">Step 1: Creating a build to Test</h2>

<p>Before you can start testing you need a valid project build that you want to run your tests against. The build has to be configured for iPhone exclusively and the easiest way to do this seems to be via the command line.</p>

<ol>
<li>
<p>Navigate to your project folder.</p>
</li>

<li>
<p>If you haven’t done so already, open Xcode and install command line tools via <code>Xcode &gt; Preferences &gt; Downloads</code>. Then check the <code>Command Line Tools</code> box and wait till the download/install is complete.</p>
</li>

<li>
<p>When that is completed, run the following command <code>xcodebuild -sdk iphonesimulator6.0 TARGETED_DEVICE_FAMILY=1</code> inserting the desired simulator build according to your needs.</p>
</li>

<li>
<p>There should now be a completed build at <code>YOUR-PROJECT-FOLDER/build/Release-iphonesimulator/YOURAPP.app</code></p>
</li>

<li>
<p>Zip this file with the following command <code>zip -r YOURAPP.zip YOURAPP.app</code> and keep track of it. This is the packaged build of your app that SauceLabs will host and you will use to run your tests so make sure its good to go.</p>
</li>
</ol>

<p><strong>Note:</strong> At the time of writing this (Oct 16th, 2013), there is a bit of a hang up between cocoa pods and building via command line. If you try and build for <code>iPhoneSimulator7.0</code> you will get a clang error about lpods. It has to do with not including 64 bit architecture in the build but I didn’t spend the time to figure out how modify the build from command line. Probably a pretty easy work around. Similarly, you could just downgrade your the simulator build to 6.1 or something, but if you have included anything iOS7-ish in your project that won’t work either :(</p>

<h2 id="step_2_uploading_your_build_to_saucelabs">Step 2: Uploading your build to SauceLabs</h2>

<p>You will need a valid SauceLabs account for this. Invoke Labs should have one in which cause you should be using that <code>ClientID</code> and <code>ClientSecret</code>. For the remiander of these instructions I will assume your <code>ClientID</code> is <code>InvokeLabs</code>, your <code>ClientSecret</code> is <code>AAAA-AAAA-AAAA-AAAA</code>, and your app is called <code>YOURAPP.app</code></p>

<ol>
<li>
<p>Locate <code>.app.zip</code> build of you app from Setp 1 that you want to run tests against. From the command line modify and run the following: <code>curl -u InvokeLabs:AAAA-AAAA-AAAA-AAAA -X POST &quot;http://saucelabs.com/rest/v1/storage/InvokeLabs/YOUR-APP.app.zip?overwrite=true&quot; -H &quot;Content-Type: application/octet-stream&quot; --data-binary @/Users/wherever/you/saved/the/file/probably/in/build/Release-iphonesimulator/YOURAPP.app.zip</code></p>
</li>

<li>
<p>You should get a JSON response in the command line to confirm that they have received the file and that it has content, etc.</p>
</li>
</ol>

<p><strong>note:</strong> This is temporary storage and files are removed after 24hours. Also note, that the <code>@</code> is crucial, if drop it, you do not recieve an error but the actual file does not make its way to SauceLabs and you will be unhappy with yourself.</p>

<h2 id="step_3_creating_a_test_with_the_framework_of_your_choice_for_appium">Step 3: Creating a Test with the framework of your choice for Appium</h2>

<p>Because we have to choose something, this particular demo is going to use Cucumber and Ruby/RSpec to generate the tests. If you don’t have a testing framework/language in mind this is a pretty good choice. If you do have a framework in mind that is different than this, make sure you can hook it into the <a href="https://github.com/appium/appium/wiki/JSON-Wire-Protocol:-Supported-Methods">Appium JSON Wire Protocol</a>. Other than that, its pretty wide open in terms of what will work.</p>

<h4 id="a_creating_a_gherkin_feature_file">a. Creating a Gherkin feature file</h4>

<p>Cucumber uses the Gherkin Language to write its feature files. You can think of these feature files as sort of a blueprint for what you want to test for and what you want your code to do. These feature files are used in conjunction with the tests you will write but this actual code isn’t compiled or really ran in any traditional sense. Details regarding Gherkin can be found <a href="https://github.com/cucumber/cucumber/wiki/Gherkin">here</a>.</p>

<ol>
<li>
<p>Open (or create) the folder that your Xcode project folder lives in.</p>
</li>

<li>
<p>Create a file called titled <code>Gemfile</code> with following contents: <code>source &quot;https://www.rubygems.org&quot;
gem &quot;rest-client&quot;
gem &quot;rspec&quot;
gem &quot;selenium-webdriver&quot;
gem &quot;cucumber&quot;
gem &quot;rspec-expectations&quot;</code></p>
</li>

<li>
<p>Run the following in command line: <code>bundle install</code>. This creates a <code>Gemfile.lock</code> file in the current directory.</p>
</li>

<li>
<p>Create an additional folder titled <code>features</code> and in that folder, a file titled <code>YOURAPP.feature</code></p>
</li>

<li>
<p>Populate the contents of your feature file with Gherkin syntax explaining the usage you expect of your app and its particular features. You will eventually parse these gherkin statements with regular expressions so keep that in mind to ensure that you can easily build in a variety of text entries or button pushes or whatever your app happens to do. To give you an idea of syntax and approach, below is a sample chunk of Gherkin for an App built on the <code>Master table view prototype</code> that is intend to have a user add a new detail page, enter data on that page, save and have the new detail page appear in the master tableview:</p>
</li>
</ol>
<div class='highlight'><pre><code class='Gherkin'><span class='k'>Feature:</span><span class='nf'> Notes</span>
<span class='nf'>	As a iPhone user</span>
<span class='nf'>	I want to YOURAPP app</span>
<span class='nf'>	So that I can make note of everything happening in my life	</span>

<span class='k'>Scenario:</span><span class='nf'> Add new note</span>
<span class='k'>	Given </span><span class='nf'>I have App running with appium</span>
<span class='nf'>	</span><span class='k'>When </span><span class='nf'>click + button</span>
<span class='nf'>	</span><span class='k'>And </span><span class='nf'>I enter text &quot;</span><span class='s'>Data</span><span class='nf'>&quot; and saved it</span>
<span class='nf'>	</span><span class='k'>Then </span><span class='nf'>I should see &quot;</span><span class='s'>Data</span><span class='nf'>&quot; note added on home page</span>
</code></pre></div>
<p>The Feature block is largely ignored, but you will link tests up to each scenario.</p>

<h4 id="b_creating_the_actual_tests">b. Creating the Actual Tests</h4>

<ol>
<li>Now that we have a Gherkin blueprint set up, we can write the actual tests that implement it using Ruby/RSpec and the Appium - JSON wire Protocol. To do this we’ll create a sub folder in <code>features</code> titled <code>StepDefinitions</code> and generate a <code>YOURAPPTEST.rb</code> file inside that folder. For this example, the contents of this file is written in Ruby and will map to what you outlined in your <code>.feature</code> file. Using the <code>.feature</code> file outlined above the corresponding code for a hypothetical <code>Master table view prototype</code> app would look something like this:</li>
</ol>
<div class='highlight'><pre><code class='ruby'><span class='no'>Given</span><span class='p'>(</span><span class='sr'>/^I have App running with appium$/</span><span class='p'>)</span> <span class='k'>do</span>  
	<span class='c1'># Make sure you have started appium server  </span>
<span class='k'>end</span>  

<span class='no'>When</span><span class='p'>(</span><span class='sr'>/^click \+ button$/</span><span class='p'>)</span> <span class='k'>do</span>  
<span class='n'>sauce</span><span class='o'>.</span><span class='n'>find_element</span><span class='p'>(</span><span class='ss'>:name</span><span class='p'>,</span> <span class='s2'>&quot;Add&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>click</span>  
<span class='k'>end</span>  


<span class='no'>When</span><span class='p'>(</span><span class='sr'>/^I enter text &quot;(.*?)&quot; and saved it$/</span><span class='p'>)</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>data</span><span class='o'>|</span>  
<span class='n'>sauce</span><span class='o'>.</span><span class='n'>find_element</span><span class='p'>(</span><span class='ss'>:xpath</span><span class='p'>,</span> <span class='s2'>&quot;//window[1]/scrollview[1]/textview[1]&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>send_keys</span> <span class='n'>data</span>  
<span class='n'>sauce</span><span class='o'>.</span><span class='n'>find_element</span><span class='p'>(</span><span class='ss'>:name</span><span class='p'>,</span> <span class='s2'>&quot;Done&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>click</span>  
<span class='n'>sauce</span><span class='o'>.</span><span class='n'>find_element</span><span class='p'>(</span><span class='ss'>:name</span><span class='p'>,</span> <span class='s2'>&quot;Save&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>click</span>  
<span class='k'>end</span>  


<span class='no'>Then</span><span class='p'>(</span><span class='sr'>/^I should see &quot;(.*?)&quot; note added on home page$/</span><span class='p'>)</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>text</span><span class='o'>|</span>  
<span class='n'>note</span> <span class='o'>=</span> <span class='n'>sauce</span><span class='o'>.</span><span class='n'>find_element</span><span class='p'>(</span><span class='ss'>:xpath</span><span class='p'>,</span><span class='err'> </span> <span class='s2'>&quot;//window[1]/tableview[1]/cell[1]/text[1]&quot;</span><span class='p'>)</span>  
<span class='n'>note</span><span class='o'>.</span><span class='n'>attribute</span><span class='p'>(</span><span class='s2'>&quot;value&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>should</span> <span class='n'>match</span> <span class='n'>text</span>  
<span class='k'>end</span>  
</code></pre></div>
<p>The code between the <code>when/then</code> and <code>@end</code> of each block can be thought of as replacing the javascript that you might have previously generated in Xcode Instruments. It is essentially what carries out the actions on your simulated app. As a note, if you are into it, you can code this by hand, but Appium provides a recorder feature which takes the manual effort out of this a bit. Ill outline how that works below but feel free to skip ahead to the next instruction if the recorder isn’t something you’re going to use. Also, the <code>sauce</code> variable that you see in most of the statements is declared in a later file, it houses the specifics of the webdriver but we’ll come to that.</p>

<blockquote>
<h3 id="using_the_appium_recorder">Using the Appium Recorder</h3>

<p>Much like the Instruments recorder, Appium records your interactions so that you don’t actually have to code your tests. It is a good for generating example code or quick tests without bothering to learn the Appium JSON wire protocol.</p>

<ol>
<li>Download Appium <a href="http://appium.io/">here</a> and install and run it.</li>

<li>Select the <code>App Path</code> checkbox and locate a valid build of your app that you want to run automation tests against.</li>

<li>Select the <code>iOS</code> tab and the <code>Force Device: iPhone</code> if those choices are appropriate for you, then click <code>Launch</code>.</li>

<li>Click on the large <code>i</code> button to launch the recorder. This should boot up the Xcode simulator and launch a screen with a picture of your app and a variety of interaction buttons. If you select the <code>Record</code> option you can begin interacting with the app and the corresponding code will be &gt;generated in the pop down window below. The test language can be toggled between <code>Obj-c</code> , <code>Ruby</code>, etc.</li>

<li>Copy and Paste this code into your test blocks as needed.</li>
</ol>
</blockquote>

<h5 id="c_putting_it_all_together">c. Putting it all together</h5>

<ol>
<li>
<p>Finally, you need to create a file that ties together your app build that you uploaded to sauce, your tests that you’ve just written, and Appium. Do this by creating a new directory in <code>features</code> called <code>support</code> and a file in it called <code>environment.rb</code>. This file is going outline your <code>client ID</code> and <code>client Secret</code> for connecting to SauceLabs as well as a bunch of other stuff that Sauce specifies… basically all the important bits to make this work.</p>

<p><strong>A moment to visualize things</strong>: We have done quite a bit in these last few instructions so it might be good to take a moment and soak up whats happening before we go on. At this point, if you were running your tests locally, you would set up this file to run on a version Appium that you downloaded (if you followed the Appium recorder instructions you will have what you need), and when you executed the <code>bundle exec cucumber features/YOUAPP.feature</code> command, your app would spin up in the simulator and all the tests you had written would carry out. On your command line, you would see the Gherkin text you had written gradually appearing and each line passing or failing based on whether or not your corresponding Ruby/Rspec tests passed. However, we are trying to get this running on sauce so we’ll skip this part, but when we do connect this to sauce, this is essentially what will be happening, expect its going to go down on their computer instead of yours.</p>
</li>

<li>
<p>In accordance with SauceLabs <a href="https://saucelabs.com/appium/tutorial/2#setting-up-tests">setup</a> you will need to include all of the following in your <code>environment.rb</code> file:</p>
</li>
</ol>

<ul>
<li>A capabilities dictionary with the following key value pairs:</li>
</ul>
<div class='highlight'><pre><code class='ruby'><span class='k'>def</span> <span class='nf'>sauce_capabilities</span> <span class='p'>{</span>  
<span class='s1'>&#39;app&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;sauce-storage:YOUAPP.zip&#39;</span><span class='p'>,</span>  
<span class='s1'>&#39;device&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;iPhone Simulator&#39;</span><span class='p'>,</span>  
<span class='s1'>&#39;username&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;Invokelabs&#39;</span><span class='p'>,</span>  
<span class='s1'>&#39;access-key&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;AAAA-AAAAA-AAAA-AAAA&#39;</span><span class='p'>,</span>  
<span class='s1'>&#39;os&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;iOS x&#39;</span>  
<span class='s1'>&#39;platform&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;OS X 10.8&#39;</span><span class='p'>,</span>  
<span class='s1'>&#39;version&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;6.0&#39;</span><span class='p'>,</span>  
<span class='s1'>&#39;name&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;YOURAPP verison x.x.x&#39;</span>  
<span class='p'>}</span><span class='k'>end</span>  
</code></pre></div>
<ul>
<li>you will also want to define your app url somewhere in the following format</li>
</ul>
<div class='highlight'><pre><code class='ruby'><span class='k'>def</span> <span class='nf'>sauce_url</span><span class='p'>{</span>  
<span class='s2'>&quot;http://InvokeLabs:AAAA-AAAA-AAAA-AAAA@ondemand.saucelabs.com:80/wd/hub&quot;</span>  
<span class='p'>}</span><span class='k'>end</span>  
</code></pre></div>
<ul>
<li>and finally define the Driver for sauce using these capabilities and the url you set up:</li>
</ul>
<div class='highlight'><pre><code class='ruby'><span class='k'>def</span> <span class='nf'>sauce</span><span class='p'>{</span>  
<span class='vi'>@sauce</span> <span class='o'>||=</span> <span class='ss'>Selenium</span><span class='p'>:</span><span class='ss'>:WebDriver</span><span class='o'>.</span><span class='n'>for</span><span class='p'>(</span><span class='ss'>:remote</span><span class='p'>,</span> <span class='ss'>:desired_capabilities</span> <span class='o'>=&gt;</span> <span class='n'>sauce_capabilities</span><span class='p'>,</span> <span class='ss'>:url</span> <span class='o'>=&gt;</span> <span class='n'>sauce_url</span><span class='p'>)</span>  
<span class='p'>}</span><span class='k'>end</span>

<span class='no'>After</span> <span class='p'>{</span> <span class='vi'>@sauce</span><span class='o'>.</span><span class='n'>quit</span><span class='p'>}</span>  
</code></pre></div>
<p>I’ll include a sample so that you can see how this would all tie in, but the set up is pretty dependent on your situation and a bit finicky, this specific sample is for Cucumber using Gherkin similar to that above and Ruby/RSpec tests similar to those you saw above. For me, this was a trail and error process at best.</p>
<div class='highlight'><pre><code class='ruby'><span class='nb'>require</span> <span class='s1'>&#39;rspec/expectations&#39;</span>  
<span class='nb'>require</span> <span class='s1'>&#39;selenium-webdriver&#39;</span>


<span class='no'>APP_PATH</span> <span class='o'>=</span> <span class='s1'>&#39;/Users/scott.buchanan/Desktop/cucumber-appium/PlainNote/build/Release-iphonesimulator/PlainNote.app&#39;</span>

<span class='k'>def</span> <span class='nf'>sauce_capabilities</span>
	<span class='p'>{</span>
		
		<span class='s1'>&#39;app&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;sauce-storage:YOURAPP.zip&#39;</span><span class='p'>,</span>
		<span class='s1'>&#39;device&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;iPhone Simulator&#39;</span><span class='p'>,</span>
		<span class='s1'>&#39;username&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;InvokeLabs&#39;</span><span class='p'>,</span>
		<span class='s1'>&#39;access-key&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;AAAA-AAAAA-AAAA-AAAA&#39;</span><span class='p'>,</span>
		<span class='s1'>&#39;platform&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;OS X 10.8&#39;</span><span class='p'>,</span>
		<span class='s1'>&#39;version&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;6.0&#39;</span><span class='p'>,</span>
		<span class='s1'>&#39;name&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;Invoke Sauce Test&#39;</span><span class='p'>,</span>
		<span class='s1'>&#39;passed&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;true&#39;</span>
		
	<span class='p'>}</span>
<span class='k'>end</span>

<span class='k'>def</span> <span class='nf'>absolute_app_path</span>
	<span class='no'>File</span><span class='o'>.</span><span class='n'>join</span><span class='p'>(</span><span class='no'>File</span><span class='o'>.</span><span class='n'>dirname</span><span class='p'>(</span><span class='bp'>__FILE__</span><span class='p'>),</span> <span class='no'>APP_PATH</span><span class='p'>)</span>
<span class='k'>end</span>

<span class='k'>def</span> <span class='nf'>sauce_url</span>
	<span class='s2'>&quot;http://IvokeLabs:AAAA-AAAA-AAAA-AAAA@ondemand.saucelabs.com:80/wd/hub&quot;</span>
<span class='k'>end</span>

<span class='k'>def</span> <span class='nf'>sauce</span>
	<span class='vi'>@sauce</span> <span class='o'>||=</span> <span class='ss'>Selenium</span><span class='p'>:</span><span class='ss'>:WebDriver</span><span class='o'>.</span><span class='n'>for</span><span class='p'>(</span><span class='ss'>:remote</span><span class='p'>,</span> <span class='ss'>:desired_capabilities</span> <span class='o'>=&gt;</span> <span class='n'>sauce_capabilities</span><span class='p'>,</span> <span class='ss'>:url</span> <span class='o'>=&gt;</span> <span class='n'>sauce_url</span><span class='p'>)</span>
<span class='k'>end</span>

<span class='no'>After</span> <span class='p'>{</span> <span class='vi'>@sauce</span><span class='o'>.</span><span class='n'>quit</span> <span class='p'>}</span>
</code></pre></div>
<h2 id="step_4_tying_this_all_together">Step 4: Tying this all together</h2>

<p>At this point all the pieces should be in place and you should be able to run a test that you have implemented on your app, as it exists on sauce labs.com… this is a very exciting time. For our specific example we would execute the following command to run our cucumber test from the project folder <code>bundle exec cucumber features/YOURAPP.feature</code>. If this was successful you would see your Gherkin statements populating the command line and turning green or red as their correlating code from the Ruby/RSpec file passed or failed. When its all done you get a report about the outcome… but no simulator was running and there was no Appium window (that was all running on some computer at sauce labs). To view the actual play by play video of your tests and see a whole bunch of other stats and stuff go to this <a href="https://saucelabs.com/tests">link</a>.</p>

        </div>
      </div>

    </div>

    <!-- Footer
    ================================================== -->
    <footer class="bs-footer" role="contentinfo">
      <div class="container">
        <!-- <ul class="footer-links">
          <li><a href="http://www.invokelabs.com" target="_blank">Website</a></li>
        </ul>
        <p class="left-corner">2013 Invoke Labs</p>
        <p class="right-corner">1.888.207.4106</p>
 -->      </div>
    </footer>

    <div id="footer">
      <div id="top-footer">    
        <div class="container" >
          <div id="table-footer" class="row footer-links">
            <div class="col-md-6 links-left">
              <ul>
                <li><a href="http://www.invokemedia.com/careers" target="_blank">Careers</a></li>
                <li><a href="http://www.invokemedia.com/products" target="_blank">Contact</a></li>
                <li><a href="http://www.invokemedia.com/blog/" target="_blank">Blog</a></li>
              <ul>
            </div>
            <div class="col-md-6 links-right">
              <ul>
                <li><a href="http://www.facebook.com/InvokeLabs?fb_ref=objc&fb_source=objc.dev" target="_blank">Facebook</a></li>
                <li><a href="https://twitter.com/InvokeLabs" target="_blank">Twitter</a></li>
                <li><a href="http://instagram.com/invokelabs" target="_blank">Instagram</a></li>
                <li><a href="http://www.linkedin.com/company/2922987" target="_blank">Linkedin</a></li>
              </ul>
            </div>
          </div>

<!--           <table id="table-footer">
            <tbody>
              <tr>
                <td id="table-item-footer"><a href="http://www.invokemedia.com/careers" target="_blank">Careers</a></td>
                <td><a href="http://www.facebook.com/InvokeLabs?fb_ref=objc&fb_source=objc.dev" target="_blank">Facebook</a></td>
              </tr>
              <tr>
                <td id="table-item-footer"><a href="http://www.invokemedia.com/products" target="_blank">Contact</a></td>
                <td><a href="https://twitter.com/InvokeLabs" target="_blank">Twitter</a></td>
              </tr>
              <tr>
                <td id="table-item-footer"><a href="http://www.invokemedia.com/blog/" target="_blank">Blog</a></td>
                <td><a href="http://instagram.com/invokelabs" target="_blank">Instagram</a></td>
              </tr>
              <tr>
                <td></td>
                <td><a href="http://www.linkedin.com/company/2922987" target="_blank">Linkedin</a></td>
              </tr>
            </tbody>
          </table> -->
        </div>
      </div>
      <div id="bottom-footer">
        <div class="container">
          <p class="left-corner">2013 Invoke Labs Inc.</p>
          <p class="right-corner">1.888.207.4106</p>
        </div>
      </div>
      </div>
    </div> 

    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="/assets/js/jquery.js"></script>
<script src="/dist/js/bootstrap.js"></script>

<script src="http://platform.twitter.com/widgets.js"></script>
<script src="/assets/js/holder.js"></script>

<script src="/assets/js/application.js"></script>




  </body>
</html>
